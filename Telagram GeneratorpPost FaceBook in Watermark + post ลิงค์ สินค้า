{
  "nodes": [
    {
      "parameters": {
        "promptType": "define",
        "text": "=‡∏Ç‡πà‡∏≤‡∏ß‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á:\n{{ $json.message.caption || $json.message.text }}\n\nPrompt (‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô System / Role):\n‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ö‡∏ô Social Media\n‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πà‡∏≤‡∏ß‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏∞‡∏ä‡∏±‡∏ö ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£ ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢ ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏ä‡∏¥‡∏á‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå\n‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏Ç‡πà‡∏≤‡∏ß ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:\n\n1. ‡∏™‡∏£‡∏∏‡∏õ ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Ç‡πà‡∏≤‡∏ß (headline) ‡πÉ‡∏´‡πâ‡∏™‡∏±‡πâ‡∏ô ‡∏ä‡∏±‡∏î ‡∏ï‡∏£‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏î‡πá‡∏ô\n2. ‡∏™‡∏£‡∏∏‡∏õ‡∏õ‡∏£‡∏∞‡πÄ‡∏î‡πá‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÅ‡∏ö‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏¢‡πà‡∏≠‡∏¢ (bullets) ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô 3 ‡∏Ç‡πâ‡∏≠ ‡πÇ‡∏î‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°:\n\n‡∏Ç‡πà‡∏≤‡∏ß‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏≠‡∏∞‡πÑ‡∏£ / ‡∏õ‡∏£‡∏∞‡πÄ‡∏î‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£\n‡πÉ‡∏Ñ‡∏£ ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£ ‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏∏‡πÉ‡∏ô‡∏Ç‡πà‡∏≤‡∏ß)\n‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Ç‡∏≠‡∏á‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ï‡πà‡∏≠‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏• ‡∏Å‡∏•‡∏∏‡πà‡∏° ‡∏´‡∏£‡∏∑‡∏≠‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° (‡πÄ‡∏ä‡πà‡∏ô ‡∏ï‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô ‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à ‡∏£‡∏±‡∏ê‡∏ö‡∏≤‡∏• ‡∏Ø‡∏•‡∏Ø)\n\n\n3. ‡πÉ‡∏ä‡πâ ‡∏†‡∏≤‡∏©‡∏≤‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£ ‡∏Å‡∏£‡∏∞‡∏ä‡∏±‡∏ö ‡πÑ‡∏°‡πà‡πÄ‡∏¢‡∏¥‡πà‡∏ô‡πÄ‡∏¢‡πâ‡∏≠\n4. ‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏™‡πà:\n\n‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß\n‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏î‡πÄ‡∏î‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡πÉ‡∏ô‡∏Ç‡πà‡∏≤‡∏ß\n‡∏Ñ‡∏≥‡πÇ‡∏õ‡∏£‡∏¢‡πÄ‡∏ä‡∏¥‡∏á‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á / clickbait\n\n\n5. ‡∏´‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô‡πÑ‡∏°‡πà‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡πÉ‡∏ô‡∏Ç‡πà‡∏≤‡∏ß ‡πÉ‡∏´‡πâ‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÅ‡∏ï‡πà‡∏á‡πÄ‡∏ï‡∏¥‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏î‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°\n\n‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö:\n‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô JSON ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏∑‡πà‡∏ô‡∏õ‡∏ô (‡∏´‡πâ‡∏≤‡∏°‡∏°‡∏µ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏´‡∏£‡∏∑‡∏≠ markdown ‡πÉ‡∏î ‡πÜ)\n‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ:\njsonDownloadCopy code{\n  \"headline\": \"\",\n  \"bullets\": [\n    \"\",\n    \"\",\n    \"\"\n  ]\n}\nheadline ‡πÅ‡∏•‡∏∞‡πÅ‡∏ï‡πà‡∏•‡∏∞ bullets ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÅ‡∏ö‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£ ‡∏Å‡∏£‡∏∞‡∏ä‡∏±‡∏ö ‡πÅ‡∏•‡∏∞‡∏≠‡πà‡∏≤‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏ô‡∏ö‡∏£‡∏¥‡∏ö‡∏ó‡∏Ç‡∏≠‡∏á‡πÇ‡∏ã‡πÄ‡∏ä‡∏µ‡∏¢‡∏•‡∏°‡∏µ‡πÄ‡∏î‡∏µ‡∏¢\n\n‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ‡∏ú‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ä‡πà‡∏ß‡∏¢‡∏ó‡∏≥‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‚Äú‡∏≠‡∏¥‡∏ô‡∏û‡∏∏‡∏ï‡∏Ç‡πà‡∏≤‡∏ß ‚Üí ‡πÄ‡∏≠‡∏≤‡∏ï‡πå‡∏û‡∏∏‡∏ï JSON‚Äù ‡πÉ‡∏´‡πâ‡∏î‡∏π‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô reference ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        -384,
        -720
      ],
      "id": "4394870c-4ddf-401a-be21-b59826ca2eb4",
      "name": "AI Agent",
      "notes": "‡∏î‡∏∂‡∏á‡∏£‡∏π‡∏õ‡∏à‡∏≤‡∏Å URL ‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡∏ó‡∏≥‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏î‡πâ‡∏ß‡∏¢ "
    },
    {
      "parameters": {
        "modelName": "models/gemini-3-pro-preview",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -384,
        -624
      ],
      "id": "3374c05d-465e-4a6a-b74d-49730344c8be",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "zyqGKH3nZnB7L4Ff",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "url": "https://github.com/singhakom/n8n-assets/blob/main/buyback-1-removebg-preview.png?raw=true",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
            }
          ]
        },
        "options": {
          "response": {
            "response": {
              "responseFormat": "file",
              "outputPropertyName": "watermark"
            }
          }
        }
      },
      "id": "8f2962ba-bb37-42e8-af93-6f225ffefd3c",
      "name": "Get Watermark Logo",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        -416,
        -384
      ],
      "notes": "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô URL ‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ"
    },
    {
      "parameters": {
        "jsCode": "// 1. ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏¥‡∏ö (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á Gemini, OpenAI, AI Agent)\nlet rawContent;\n\nif ($json.output) {\n  // ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á n8n AI Agent / Gemini Node\n  rawContent = $json.output;\n} else if ($json.text) {\n  // ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ\n  rawContent = $json.text;\n} else if ($json.choices?.[0]?.message?.content) {\n  // ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö OpenAI ‡πÄ‡∏î‡∏¥‡∏°\n  rawContent = $json.choices[0].message.content;\n} else {\n  // ‡∏´‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ ‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏á‡∏™‡πà‡∏á json ‡∏ó‡∏±‡πâ‡∏á‡∏Å‡πâ‡∏≠‡∏ô‡πÑ‡∏õ‡∏î‡∏π (‡∏Å‡∏±‡∏ô Error)\n  throw new Error(\"‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏à‡∏≤‡∏Å AI ‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏ä‡πá‡∏Ñ Output ‡∏Ç‡∏≠‡∏á Node ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤\");\n}\n\n// 2. ‡∏•‡πâ‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å Markdown (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Gemini!) üßπ\n// ‡∏•‡∏ö ```json ‡πÅ‡∏•‡∏∞ ``` ‡∏≠‡∏≠‡∏Å ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏ï‡πà‡πÄ‡∏ô‡∏∑‡πâ‡∏≠ JSON ‡πÄ‡∏û‡∏µ‡∏¢‡∏ß‡πÜ\nconst cleanJsonString = rawContent.replace(/```json|```/g, '').trim();\n\n// 3. ‡πÅ‡∏õ‡∏•‡∏á String ‡πÄ‡∏õ‡πá‡∏ô JSON Object\nlet ai;\ntry {\n  ai = JSON.parse(cleanJsonString);\n} catch (e) {\n  throw new Error(\"AI ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡πà‡∏á JSON ‡∏°‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡πà‡∏á‡∏°‡∏≤‡∏ú‡∏¥‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö: \" + rawContent);\n}\n\n// 4. ‡∏™‡∏£‡πâ‡∏≤‡∏á Caption (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡πÅ‡∏ö‡∏ö 'bullets' ‡πÅ‡∏•‡∏∞ 'content')\nconst headline = ai.headline || \"‡∏Ç‡πà‡∏≤‡∏ß‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ\";\nlet bodyContent = \"\";\n\n// ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 1: ‡∏ñ‡πâ‡∏≤ AI ‡∏™‡πà‡∏á‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô Array (bullets) ‡∏ï‡∏≤‡∏°‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì\nif (Array.isArray(ai.bullets)) {\n  bodyContent = ai.bullets.map(b => `‚Ä¢ ${b}`).join('\\n');\n} \n// ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 2: ‡∏ñ‡πâ‡∏≤ AI ‡∏™‡πà‡∏á‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡πÜ (content) ‡∏ï‡∏≤‡∏° Prompt ‡∏Ç‡πà‡∏≤‡∏ß‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î\nelse if (typeof ai.content === 'string') {\n  bodyContent = ai.content;\n} \n// ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 3: ‡∏Å‡∏±‡∏ô‡πÄ‡∏´‡∏ô‡∏µ‡∏¢‡∏ß‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏•‡∏¢\nelse {\n  bodyContent = JSON.stringify(ai); // ‡πÅ‡∏õ‡∏∞‡∏°‡∏±‡∏ô‡∏î‡∏∑‡πâ‡∏≠‡πÜ ‡πÄ‡∏•‡∏¢\n}\n\n// 5. ‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏á Facebook\nconst finalCaption = `üì∞ ${headline}\n\n${bodyContent}\n\n#NewsUpdate #BusinessNews #MoneyMinute`;\n\nreturn [\n  {\n    json: {\n      fb_caption: finalCaption,\n      // ‡πÅ‡∏ñ‡∏°‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÅ‡∏¢‡∏Å‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏≤‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏ï‡πà‡∏≠\n      headline: headline,\n      content: bodyContent\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -32,
        -720
      ],
      "id": "d98e8209-6bfd-4789-8e86-2674a5a0bd44",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "operation": "composite",
        "dataPropertyNameComposite": "watermark",
        "operator": "Atop",
        "positionX": 10,
        "positionY": 10,
        "options": {
          "fileName": "data"
        }
      },
      "type": "n8n-nodes-base.editImage",
      "typeVersion": 1,
      "position": [
        160,
        -384
      ],
      "id": "f02905b9-6ce0-4c1e-aa9e-770578fe0fc5",
      "name": "Edit Image"
    },
    {
      "parameters": {
        "resource": "file",
        "fileId": "={{ $('Telegram Trigger1').item.json.message.photo[2].file_id }}",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -384,
        -512
      ],
      "id": "3d176503-3aac-401c-86c6-9259041c0ffa",
      "name": "Get a file",
      "webhookId": "5120f18d-8a08-42e0-8048-2d99b6575125",
      "credentials": {
        "telegramApi": {
          "id": "nciNwXxIvnbXF3pR",
          "name": "sermchart"
        }
      }
    },
    {
      "parameters": {
        "content": "",
        "height": 528,
        "width": 1488
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -736,
        -768
      ],
      "typeVersion": 1,
      "id": "24aac2d1-c6fb-4787-8107-c0a9ec6e81fe",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "id": "ba52e0f1-5f34-438b-95b4-c1d2c059ac42",
      "name": "Telegram Trigger1",
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.1,
      "position": [
        -720,
        -384
      ],
      "webhookId": "telegram-news-bot",
      "credentials": {
        "telegramApi": {
          "id": "nciNwXxIvnbXF3pR",
          "name": "sermchart"
        }
      }
    },
    {
      "parameters": {
        "httpRequestMethod": "POST",
        "graphApiVersion": "v23.0",
        "node": "725647510641457",
        "edge": "photos",
        "sendBinaryData": true,
        "binaryPropertyName": "data",
        "options": {
          "queryParameters": {
            "parameter": [
              {
                "name": "=message",
                "value": "={{ $json.headline }}\n\n\n{{ $json.fb_caption }}"
              }
            ]
          }
        }
      },
      "id": "4e2eef11-ab43-4b71-a510-a2cc2f44861c",
      "name": "Post to Facebook",
      "type": "n8n-nodes-base.facebookGraphApi",
      "position": [
        576,
        -400
      ],
      "typeVersion": 1,
      "credentials": {
        "facebookGraphApi": {
          "id": "OPPB5icuMiD0qfXm",
          "name": "page moneyminute"
        }
      }
    },
    {
      "parameters": {
        "operation": "resize",
        "dataPropertyName": "watermark",
        "width": 50,
        "height": 50,
        "resizeOption": "ignoreAspectRatio",
        "options": {}
      },
      "type": "n8n-nodes-base.editImage",
      "typeVersion": 1,
      "position": [
        -240,
        -384
      ],
      "id": "2cdc92fb-b432-4df8-bc54-16c074af0224",
      "name": "Resize"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        400,
        -400
      ],
      "id": "2f2ebb12-832b-44d4-a081-ea3e42e813fc",
      "name": "‡∏£‡∏ß‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÇ‡∏û‡∏™"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineAll",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -32,
        -576
      ],
      "id": "784ad287-2b1c-40d7-a97a-80d668c6a3a7",
      "name": "Merge ‡πÇ‡∏•‡πÇ‡∏Å‡πâ"
    },
    {
      "parameters": {
        "jsCode": "// Node 3 - DEBUG VERSION (‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏∏‡∏Å‡∏õ‡∏±‡∏ç‡∏´‡∏≤)\nconsole.log('üîç Rows input:', $input.all().length);\n\nconst products = $input.all().map((item, i) => {\n  const p = item.json;\n  console.log(`Row ${i}: title=\"${p.title?.slice(0,30)}\" cat1=\"${p.global_category1}\"`);\n  \n  return {\n    json: {\n      row: i + 1,\n      title: String(p.title || p.Title || '').slice(0, 50),\n      cat1: String(p.global_category1 || p.Category1 || ''),\n      cat2: String(p.global_category2 || p.Category2 || ''),\n      link: String(p.product_link || p['product_short link'] || ''),\n      pref: String(p.is_preferred_shop || '').includes('Preferred'),\n      score: 1  // ‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏ä‡∏¥‡πâ‡∏ô score 1\n    }\n  };\n}).filter(p => p.json.title.length > 3);  // title > 3 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£\n\nconsole.log(`‚úÖ Products after filter: ${products.length}`);\nconsole.log('Sample:', JSON.stringify(products[0]?.json, null, 2));\n\nreturn [{\n  json: {\n    total: products.length,\n    summary: `all(${products.length})`,\n    top: products.slice(0, 10),\n    all: products\n  }\n}];\n"
      },
      "id": "6d394ba2-11f6-43a8-84cc-0f8d7e97a19e",
      "name": "3. ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Code)1",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -496,
        16
      ]
    },
    {
      "parameters": {
        "httpRequestMethod": "POST",
        "graphApiVersion": "v23.0",
        "node": "={{ $json.fb_post_id }}",
        "edge": "=comments",
        "allowUnauthorizedCerts": "=",
        "options": {
          "queryParameters": {
            "parameter": [
              {
                "name": "message",
                "value": "={{ $json.product_name }}\n{{ $json.product_link }}"
              }
            ]
          }
        }
      },
      "id": "4ec0956e-ccb2-4642-828b-832813ef8b91",
      "name": "Comment to Facebook1",
      "type": "n8n-nodes-base.facebookGraphApi",
      "position": [
        272,
        16
      ],
      "typeVersion": 1,
      "credentials": {
        "facebookGraphApi": {
          "id": "OPPB5icuMiD0qfXm",
          "name": "page moneyminute"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Zl6l46NJi1RBwMKvegoTR09zDMRHNagJvdq4N18R_tw",
          "mode": "list",
          "cachedResultName": "shoppee full",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Zl6l46NJi1RBwMKvegoTR09zDMRHNagJvdq4N18R_tw/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "‡∏ä‡∏µ‡∏ï1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Zl6l46NJi1RBwMKvegoTR09zDMRHNagJvdq4N18R_tw/edit#gid=0"
        },
        "options": {
          "returnFirstMatch": true
        }
      },
      "id": "fb7eefc2-b922-4d78-b2a7-ac9e8383b7b2",
      "name": "‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤1",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -688,
        16
      ],
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "BFzqtZ4Jdc301hqN",
          "name": "sheet api"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "models/gemini-flash-latest",
          "mode": "list",
          "cachedResultName": "models/gemini-flash-latest"
        },
        "messages": {
          "values": [
            {
              "content": "=üì∞ **‡∏Ç‡πà‡∏≤‡∏ß:** {{ $('Code in JavaScript').first().json.headline }}\n\nüì¶ **‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ({{ $('3. ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Code)1').first().json.total }} ‡∏ä‡∏¥‡πâ‡∏ô):**\nWomen Shoes, Women Bags, Watches, Travel & Luggage, Stationery, Sports & Outdoors, Pets, Motorcycles, Mom & Baby, Mobile & Gadgets, Men Shoes, Men Bags, Home & Living, Home Appliances, Hobbies & Collections, Health, Food & Beverages, Fashion Accessories, Computers & Accessories, Books & Magazines, Beauty, Baby & Kids Fashion, Automobiles, Audio\n\nüéØ **‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 1 ‡∏´‡∏°‡∏ß‡∏î‡∏ó‡∏µ‡πà match ‡∏Ç‡πà‡∏≤‡∏ß‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î:**\n\n**üí∞ ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏ü‡πâ‡∏≠/‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à** ‚Üí Mobile & Gadgets, Home Appliances (‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)\n**‚öîÔ∏è ‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°/‡∏ß‡∏¥‡∏Å‡∏§‡∏ï** ‚Üí Home & Living, Food & Beverages (ÂÇôÊÄ•)\n**ü§ñ Tech/AI** ‚Üí Mobile & Gadgets, Computers & Accessories\n**üíä ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û** ‚Üí Health, Beauty\n**üë∂ ‡πÄ‡∏î‡πá‡∏Å** ‚Üí Mom & Baby, Baby & Kids Fashion\n**‚úàÔ∏è ‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß** ‚Üí Travel & Luggage\n**üèÉ ‡∏Å‡∏µ‡∏¨‡∏≤** ‚Üí Sports & Outdoors\n\n‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:\n{{ $('3. ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Code)1').first().json.top.map(p => `‚Ä¢ ${p.json.title} [${p.json.cat1}]`).join('\\n') }}\n\n**JSON ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô:**\n{\"group\": \"Mobile & Gadgets\", \"confidence\": \"high\"}\n"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        -336,
        16
      ],
      "id": "b3868a60-60fb-4544-8166-e97637584734",
      "name": "AI ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤1",
      "credentials": {
        "googlePalmApi": {
          "id": "zyqGKH3nZnB7L4Ff",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "var inputData = $input.first();\nvar aiRaw = \"\";\nif (inputData && inputData.json && inputData.json.content && inputData.json.content.parts && inputData.json.content.parts[0] && inputData.json.content.parts[0].text) {\n  aiRaw = inputData.json.content.parts[0].text;\n}\n\nvar clean = aiRaw;\nif (clean.indexOf(\"{\") > 0) {\n  clean = clean.substring(clean.indexOf(\"{\"));\n}\nif (clean.lastIndexOf(\"}\") > 0) {\n  clean = clean.substring(0, clean.lastIndexOf(\"}\") + 1);\n}\n\nvar aiResp = { group: \"default\" };\ntry {\n  aiResp = JSON.parse(clean);\n} catch(e) {\n}\n\nvar group = aiResp.group || \"default\";\nvar node3 = $(\"3. ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Code)1\").first();\nvar products = [];\nif (node3 && node3.json && node3.json.top) {\n  products = node3.json.top;\n}\n\n// üî• ‡∏™‡∏∏‡πà‡∏°‡∏°‡∏±‡πà‡∏ß‡∏ó‡∏∏‡∏Å‡πÇ‡∏û‡∏™‡∏ï‡πå!\nvar match = products.length > 0 ? products[Math.floor(Math.random() * products.length)] : { title: \"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏î‡πà‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ\", link: \"https://shopee.co.th/moneyminute\" };\n\nvar fbId = \"just_posted\";\ntry {\n  fbId = $(\"Post to Facebook\").first().json.id || \"just_posted\";\n} catch(e) {\n}\n\nreturn [{\n  json: {\n    fb_post_id: fbId,\n    product_name: match.json ? match.json.title : match.title,\n    product_link: match.json ? match.json.link : match.link,\n    ai_group: group,\n    random_index: products.length > 0 ? Math.floor(Math.random() * products.length) : 0,\n    total_products: products.length\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -48,
        16
      ],
      "id": "d4fc66ec-8f72-4aaf-93f3-4383117724e8",
      "name": "Code in JavaScript2"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1IeXuO1J4Ko0atUTTxkRX2G3_8ZN_v6JkVqqKma0YCQo",
          "mode": "list",
          "cachedResultName": "‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IeXuO1J4Ko0atUTTxkRX2G3_8ZN_v6JkVqqKma0YCQo/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 288756215,
          "mode": "list",
          "cachedResultName": "logs",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IeXuO1J4Ko0atUTTxkRX2G3_8ZN_v6JkVqqKma0YCQo/edit#gid=288756215"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Product": "={{ $('Code in JavaScript2').first().json.product_name || '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤' }}",
            "Link": "={{ $('Code in JavaScript2').first().json.product_link || '#' }}",
            "PostID": "={{ $('Code in JavaScript2').first().json.fb_post_id || 'just_posted' }}",
            "Date": "={{ $now.setZone('Asia/Bangkok').toFormat('dd/MM/yyyy HH:mm:ss') }}",
            "Headline": "={{ $('Code in JavaScript').first().json.headline || 'N/A' }}",
            "AIGroup": "={{ $('Code in JavaScript2').first().json.ai_group || 'default' }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Headline",
              "displayName": "Headline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Product",
              "displayName": "Product",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Link",
              "displayName": "Link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "PostID",
              "displayName": "PostID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "AIGroup",
              "displayName": "AIGroup",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        512,
        16
      ],
      "id": "1e82f640-35b9-4e46-96e1-ddaab846afbf",
      "name": "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÇ‡∏û‡∏™1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "BFzqtZ4Jdc301hqN",
          "name": "sheet api"
        }
      }
    },
    {
      "parameters": {
        "content": "",
        "height": 400,
        "width": 1488
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -736,
        -224
      ],
      "typeVersion": 1,
      "id": "8d12ee67-b553-41de-ba95-ad9612bd12eb",
      "name": "Sticky Note1"
    }
  ],
  "connections": {
    "AI Agent": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Get Watermark Logo": {
      "main": [
        [
          {
            "node": "Resize",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "‡∏£‡∏ß‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÇ‡∏û‡∏™",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Image": {
      "main": [
        [
          {
            "node": "‡∏£‡∏ß‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÇ‡∏û‡∏™",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Get a file": {
      "main": [
        [
          {
            "node": "Merge ‡πÇ‡∏•‡πÇ‡∏Å‡πâ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram Trigger1": {
      "main": [
        [
          {
            "node": "Get Watermark Logo",
            "type": "main",
            "index": 0
          },
          {
            "node": "Get a file",
            "type": "main",
            "index": 0
          },
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Post to Facebook": {
      "main": [
        [
          {
            "node": "‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Resize": {
      "main": [
        [
          {
            "node": "Merge ‡πÇ‡∏•‡πÇ‡∏Å‡πâ",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "‡∏£‡∏ß‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÇ‡∏û‡∏™": {
      "main": [
        [
          {
            "node": "Post to Facebook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge ‡πÇ‡∏•‡πÇ‡∏Å‡πâ": {
      "main": [
        [
          {
            "node": "Edit Image",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "3. ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Code)1": {
      "main": [
        [
          {
            "node": "AI ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Comment to Facebook1": {
      "main": [
        [
          {
            "node": "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÇ‡∏û‡∏™1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤1": {
      "main": [
        [
          {
            "node": "3. ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Code)1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤1": {
      "main": [
        [
          {
            "node": "Code in JavaScript2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript2": {
      "main": [
        [
          {
            "node": "Comment to Facebook1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "5ad56853696598a6eff8f657de8b13d4264e6300fc1bab5a313186809fef1503"
  }
}
